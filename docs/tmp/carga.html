<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Editor de Configuración YAML</title>
        <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
    </head>
    <body>
        <h1>Cargar Configuración</h1>
        <input type="text" id="urlInput" value="test.yaml" placeholder="Ruta al archivo YAML">
        <button onclick="cargarYAML()">Cargar</button>

        <div id="contenido"></div>

        <script>
         async function cargarYAML() {
             const url = document.getElementById('urlInput').value;
             const contenedor = document.getElementById('contenido');

             contenedor.innerHTML = '<p>Cargando...</p>';

             try {
                 // Descargar
                 const response = await fetch(url);
                 if (!response.ok) throw new Error(`HTTP ${response.status}`);

                 const yamlText = await response.text();

                 // Parsear
                 const datos = jsyaml.load(yamlText);

                 // Mostrar
                 contenedor.innerHTML = `
                     <h2>✅ Configuración cargada</h2>
                     <pre>${JSON.stringify(datos, null, 2)}</pre>
                     <button onclick="descargarYAML(${JSON.stringify(datos)})">Descargar como YAML</button>
                 `;

             } catch (error) {
                 contenedor.innerHTML = `
                     <h2 style="color: red">❌ Error</h2>
                     <p>${error.message}</p>
                     <pre>${error.toString()}</pre>
                 `;
             }
         }

         function descargarYAML(datos) {
             const yamlText = jsyaml.dump(datos);
             const blob = new Blob([yamlText], { type: 'text/yaml' });
             const url = URL.createObjectURL(blob);

             const a = document.createElement('a');
             a.href = url;
             a.download = 'test.yaml';
             a.click();

             URL.revokeObjectURL(url);
         }
        </script>
    </body>
</html>
